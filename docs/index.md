---
page_title: "HAProxy Data Plane Provider"
description: |-
  Manage HAProxy configuration and runtime objects through the HAProxy Data Plane API.
---

# HAProxy Data Plane Provider

Use this provider to manage HAProxy configuration with Terraform and keep load balancer changes in version control.

## Quick Start

This example creates a complete HTTP flow: backend, backend server, frontend, and bind.
Use it as the baseline for new deployments and then adjust names, ports, and server addresses.

```terraform
terraform {
  required_providers {
    haproxy-dataplane = {
      source  = "pderuiter/haproxy-dataplane"
      version = ">= 0.1.7"
    }
  }
}

provider "haproxy-dataplane" {
  endpoint = "http://127.0.0.1:5555"
  username = "admin"
  password = "adminpwd"
}

resource "haproxy-dataplane_backend" "api" {
  name = "be_api"

  spec = {
    mode = "http"
    balance = {
      algorithm = "roundrobin"
    }
  }
}

resource "haproxy-dataplane_backend_server" "api_1" {
  parent_name = haproxy-dataplane_backend.api.name
  name        = "api-1"

  spec = {
    address = "10.0.20.11"
    port    = 8080
    check   = "enabled"
  }
}

resource "haproxy-dataplane_frontend" "public" {
  name = "fe_public"

  spec = {
    mode            = "http"
    default_backend = haproxy-dataplane_backend.api.name
  }
}

resource "haproxy-dataplane_frontend_bind" "http" {
  parent_name = haproxy-dataplane_frontend.public.name
  name        = "http"

  spec = {
    address = "*"
    port    = 80
  }
}
```

## Authentication Patterns

### Basic authentication (username/password)

Use this when Data Plane API is configured with a `userlist` and basic auth.

```terraform
provider "haproxy-dataplane" {
  endpoint = "https://haproxy.internal:5555"
  username = var.haproxy_username
  password = var.haproxy_password
}
```

### Token-based authentication

Use this when your Data Plane API is fronted by a token-issuing auth flow or reverse proxy.

```terraform
provider "haproxy-dataplane" {
  endpoint = "https://haproxy.internal:5555"
  token    = var.haproxy_token
}
```

### mTLS authentication

Use this when Data Plane API requires client certificate authentication.

```terraform
provider "haproxy-dataplane" {
  endpoint        = "https://haproxy.internal:5555"
  client_cert_pem = file("certs/client.crt")
  client_key_pem  = file("certs/client.key")
  ca_cert_pem     = file("certs/ca.crt")
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `endpoint` (String) Base URL for the HAProxy Data Plane API, for example https://haproxy.example.com:5555.

### Optional

- `api_path` (String) Base API path for the Data Plane API, for example /v3. Defaults to /v3.
- `ca_cert_pem` (String, Sensitive) PEM-encoded CA certificate to trust for TLS.
- `client_cert_pem` (String, Sensitive) PEM-encoded client certificate for mTLS.
- `client_key_pem` (String, Sensitive) PEM-encoded client private key for mTLS.
- `insecure` (Boolean) Skip TLS certificate verification.
- `password` (String, Sensitive) Password for basic auth. Use with username if token is not provided.
- `timeout_seconds` (Number) HTTP client timeout in seconds.
- `token` (String, Sensitive) Bearer token for the Data Plane API.
- `username` (String) Username for basic auth. Use with password if token is not provided.
